$(function(){var url=window.location.pathname;var checkurl=url.search('msworld');if(checkurl==1&&sessionStorage.getItem("userLogin")==null){$("#logModal").modal({backdrop:'static',keyboard:!1})}
$('#uLogin').on('click',function(){var uname=$('#email12').val();var upass=$('#password12').val();if(uname=='maruti'&&upass=='maruti'){sessionStorage.setItem("userLogin","11");$("#logModal").modal('hide')}else{alert("Wrong credential")}})
$(document).on('click','.validate-form',function(){var formName=$(this).closest('form').attr('name'),formId=$(this).closest('form').attr('id'),self=$(this);$.validator.addMethod("customemail",function(value,element){if(value===''){return!0}else{return/^\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/.test(value)}},"Please enter a valid email");var validator=$(this).closest('form').validate({rules:{phone:{digits:!0,minlength:10,maxlength:10},otp:{digits:!0,minlength:5,maxlength:5},email:{customemail:!0}},messages:{name:"Please enter your name",company:"Please enter your company name",buyer:"Please enter type of buyer",phone:{required:"Please enter your number",minlength:"Please enter {0} digit mobile number",maxlength:"Please enter {0} digit mobile number",},otp:{required:"Please enter the otp",digits:'Please enter in digits',minlength:'Please enter {0} digit otp',maxlength:'Please enter {0} digit otp'},email:{required:'Please enter your email',},experience:"Please select your experience",address:"Please enter your address",state:"Please select your state",city:"Please select your city",enquiry:"Please enter your enquiry",dealerstate:"Please select your dealer state",dealercity:"Please select your dealer city"},submitHandler:function(form,event){event.preventDefault();if(formName=='registerdata'){event.preventDefault();var formdata=$(form).serialize();if(formdata!=null){var loading=$(".registerdata").find("#loading");loading.show();$.ajax({type:"POST",url:'/api/sitecore/BusinessOpportunity/Register',data:formdata,dataType:"json",success:function(result){if(result==="Success"){loading.hide();$(self).closest('.register').hide();$(self).closest('.register').next('.noticedocs').show();$('.success').css({'display':'block'});$('.noticedocs').css({'display':'block'})}else{loading.hide();console.log(result)}},error:function(err,result){loading.hide();console.log(err.responseText)}})}}else if(formName=='mobile-validation-overlay'&&formId=='business-opportunityAppln-otp'){event.preventDefault();var formData=$(form).serialize();var activeSlide=$(self).closest(".modal-body").find("div .content.active").first();$.ajax({type:"POST",url:$(self).data("ajax-url"),data:formData,dataType:"json",success:function(result){if(result==="Success"){$(activeSlide).removeClass("active");$(activeSlide).next().addClass("active")}else{console.log(result)}},error:function(err){console.log(err)}})}else if(formName=='mobile-validation-overlay'&&formId=='maruti-driving-school'){event.preventDefault();var formData=$(form).serialize();var activeSlide=$(self).closest(".modal-body").find("div .content.active").first();$.ajax({type:"POST",url:$(self).data("ajax-url"),data:formData,dataType:"json",success:function(result){if(result==="Success"){$(activeSlide).removeClass("active");$(activeSlide).next().addClass("active")}else{console.log(result)}},error:function(err){console.log(err)}})}else if(formName=='send-enquiry'){event.preventDefault();formdata=$(form).serialize();var loading=$("#sendenquiry.bo-parts").find("#loading");loading.show();var activeSlide=$(self).closest(".modal-body").find("div .content.active").first();if(formdata!=null){$.ajax({type:"POST",url:'/api/sitecore/BusinessOpportunity/SaveDetails',data:formdata,dataType:"json",success:function(result){loading.hide();if(result==="Success"){$(activeSlide).removeClass("active");$(activeSlide).next().addClass("active")}else{console.log(result)}},error:function(err,result){loading.hide();console.log(err.responseText)}})}}else if(formName=='mds-details'){event.preventDefault();formdata=$(form).serialize();var loading=$(".mds-details").find("#loading");loading.show();var activeSlide=$(self).closest(".modal-body").find("div .content.active").first();if(formdata!=null){$.ajax({type:"POST",url:$(self).data("ajax-url"),data:formdata,dataType:"json",success:function(result){loading.hide();if(result==="Success"){$(activeSlide).removeClass("active");$(activeSlide).next().addClass("active")}else{console.log(result)}},error:function(err,result){loading.hide();console.log(err.responseText)}})}}else if(formName=='registration-data'){var formData={};var rowData=[];var data={}
$(form).find('.com-details .formclone').each(function(index,val){var item={};$(this).find('select,input,textarea').each(function(i,v){item[$(this).attr('name')]=$(this).val()})
rowData.push(item)});formData.compDetails=rowData;$(form).find('.add-details').find('select,input,textarea').each(function(index,val){formData[$(this).attr('name')]=$(this).val()});if(formData!==''){var loading=$("#registration-data").find("#loading");loading.show();$.ajax({type:"POST",url:'/api/sitecore/InstitutionalCustomerForm/InstitutionalCustomerData',data:JSON.stringify(formData),contentType:'application/json',dataType:"json",success:function(result){loading.hide();if(result==="success"){$('.register').attr('style','display:none');$('.success-message').attr('style','display:block')}else{console.log(result)}},error:function(err,result){loading.hide();console.log(err.responseText)}})}}
if(formId==='mgp-order-enquiry-cust-otp'){var formdata=$(form).serialize();$.ajax({type:"POST",url:$(form).data("ajax-url"),data:formdata,dataType:"json",success:function(result){if(result==="success"){window.location.reload(!0)}else{console.log(result)}},error:function(err,result){console.log(err.responseText)}})}
if(formId==='institutional-cust-otp'){var formdata=$(form).serialize();$.ajax({type:"POST",url:$(form).data("ajax-url"),data:formdata,dataType:"json",success:function(result){if(result==="success"){window.location.reload(!0)}else{console.log(result)}},error:function(err,result){console.log(err.responseText)}})}}});$(this).closest('form').find('input[required]').each(function(){$(this).rules('add',{required:{depends:function(){if($(this).val().indexOf(' ')>0){return!0}else{$(this).val($.trim($(this).val()));return!0}}}})});validator.form()});$("section, .mainSection").on('click',function(){if($("body").hasClass('sidebarNav-open')){$(".toggle-menu").click()}})})